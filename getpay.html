<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ABC Store</title>
    <script defer src="https://minio.finpos.global/getpay-cdn/webcheckout/v5/bundle.js"></script>
</head>
<body>
    <!-- Checkout container -->
    <div id="checkout" hidden></div>

    <h1>Welcome to ABC Store</h1>

    <!-- Product details can be added here -->

    <button id="checkout-btn">Checkout</button>

    <script>
        const options = {
            userInfo: {
                name: "John Doe",
                email: "john@gmail.com",
                state: "Bagmati",
                country: "Nepal",
                zipcode: "44600",
                city: "Kathmandu",
                address: "Chabahil",
            },
            clientRequestId: "CLIENT123",
            PAPINFO: "eyJpbnN0aXR1dGlvbklkIjoiMTIyIiwibWlkIjoiMTIzMTIzNDUxNzcwOTg2IiwidGlkIjoiMTIzNTg3NjIifQ==",
            oprKey: "4fa4c6b9-3f91-43e5-9b4f-319f68187ba5",
            inskey: "",
            websiteDomain: "http://localhost:8080",
            price: "5545",
            businessName: "OneStop Shopping - Rediscover a great shopping tradition",
            imageUrl: "http://localhost:8080/image.png",
            currency: "NPR",
            prefill: {
                name: true,
                email: true,
                state: true,
                city: true,
                address: true,
                zipcode: true,
                country: true
            },
            disableFields: {
                address: true,
                state: true,
            },
            callbackUrl: {
                successUrl: 'http://localhost:8080/success.html',
                failUrl: 'http://localhost:8080/fail.html',
            },
            themeColor: "#5662FF",
            orderInformationUI: `<div style="font-family:Arial;"><h3>Order Information</h3><div class="item" style="margin-bottom: 20px;"><div class="item"><img style="max-width: 50px; margin-right: 10px;" src="http://localhost:8080/image.png" alt="image"><p>Cup Set</p><span>Rs 450</span></div></div>`,
            onSuccess: (options) => {
                window.location.href = "./payment.html";
            },
            onError: (error) => {
                console.error(error);
            },
        };

        document.getElementById('checkout-btn').addEventListener('click', function () {
            options.baseUrl = "https://uat-bank-getpay.nchl.com.np/ecom-web-checkout/v1/secure-merchant/transactions";
            const getpay = new GetPay(options);
            getpay.initialize();
        });
    </script>
</body>
</html>
